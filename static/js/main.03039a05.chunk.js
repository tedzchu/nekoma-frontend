(this.webpackJsonpnekoma=this.webpackJsonpnekoma||[]).push([[0],{165:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(36),r=a.n(l),o=a(19),u=a(43),i=a(45),m=(a(99),a(100),a(32)),s=a(9),d=a.n(s),E=a(8),p=a(46),f=a(83),b=a.n(f),v=function(){return window.history.replaceState({},document.title,window.location.pathname)},g=c.a.createContext(),h=function(){return Object(n.useContext)(g)},k=function(){return c.a.createElement("div",{className:"container"},c.a.createElement(o.b,{to:"/products"},c.a.createElement("div",{className:"split left"},c.a.createElement("div",{className:"centered"},c.a.createElement("h1",null,"Products")))),c.a.createElement(o.b,{to:"/events"},c.a.createElement("div",{className:"split right"},c.a.createElement("div",{className:"centered"},c.a.createElement("h1",null,"Events")))))},y=function(){var e=h().loginWithRedirect;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"split left",onClick:function(){return e({})}},c.a.createElement("div",{className:"centered"},c.a.createElement("h1",null,"Log In"))),c.a.createElement("div",{className:"split right"},c.a.createElement("div",{className:"centered"},c.a.createElement("h1",null,"Sign Up"))))},j=a(56),O=function(e){return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Username"),c.a.createElement("th",null,"Actions"))),c.a.createElement("tbody",null,e.users.length>0?e.users.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.username),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.editRow(t)},className:"button muted-button"},"Edit"),c.a.createElement("button",{onClick:function(){return e.deleteUser(t.id)},className:"button muted-button"},"Delete")))})):c.a.createElement("tr",null,c.a.createElement("td",{colSpan:3},"No users"))))},w=a(23),N=a(30),x=function(e){var t={id:null,name:"",username:""},a=Object(n.useState)(t),l=Object(E.a)(a,2),r=l[0],o=l[1],u=function(e){console.log(e);var t=e.target,a=t.name,n=t.value;o(Object(N.a)({},r,Object(w.a)({},a,n)))};return c.a.createElement("form",{onSubmit:function(a){a.preventDefault(),r.name&&r.username&&(e.addUser(r),o(t))}},c.a.createElement("label",null,"Name"),c.a.createElement("input",{type:"text",name:"name",value:r.name,onChange:u}),c.a.createElement("label",null,"Username"),c.a.createElement("input",{type:"text",name:"username",value:r.username,onChange:u}),c.a.createElement("button",null,"Add new user"))},S=function(e){var t=Object(n.useState)(e.currentUser),a=Object(E.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){r(e.currentUser)}),[e]),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.updateUser(l.id,l)}},c.a.createElement("label",null,"Name"),c.a.createElement("input",{type:"text",name:"name",value:l.name,onChange:function(e){var t=e.target,a=t.name,n=t.value;r(Object(N.a)({},l,Object(w.a)({},a,n)))}}),c.a.createElement("button",null,"Update user"),c.a.createElement("button",{onClick:function(){return e.setEditing(!1)},className:"button muted-button"},"Cancel"))},C=function(){var e=Object(n.useState)([{id:1,name:"Jake",username:"sk1llz7007"},{id:2,name:"Erik",username:"erik1125e"},{id:3,name:"Mara",username:"urmom"}]),t=Object(E.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),o=Object(E.a)(r,2),u=o[0],i=o[1],m=Object(n.useState)({id:null,name:"",username:""}),s=Object(E.a)(m,2),d=s[0],p=s[1];return c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"CRUD App with Hooks"),c.a.createElement("div",{className:"flex-row"},c.a.createElement("div",{className:"flex-large"},u?c.a.createElement("div",null,c.a.createElement("h2",null,"Edit user"),c.a.createElement(S,{editing:u,setEditing:i,currentUser:d,updateUser:function(e,t){i(!1),l(a.map((function(a){return a.id===e?t:a})))}})):c.a.createElement("div",null,c.a.createElement("h2",null,"Add user"),c.a.createElement(x,{addUser:function(e){e.id=a.length+1,l([].concat(Object(j.a)(a),[e]))}}))),c.a.createElement("div",{className:"flex-large"},c.a.createElement("h2",null,"View users"),c.a.createElement(O,{users:a,editRow:function(e){i(!0),p({id:e.id,name:e.name,username:e.username})},deleteUser:function(e){l(a.filter((function(t){return t.id!==e})))}}))))},U=function(e){var t=e.component,a=e.path,l=Object(p.a)(e,["component","path"]),r=h(),o=r.loading,u=r.isAuthenticated,i=r.loginWithRedirect;Object(n.useEffect)((function(){if(!o&&!u){d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(i({appState:{targetUrl:a}}));case 2:case"end":return e.stop()}}))}}),[o,u,i,a]);return c.a.createElement(m.a,Object.assign({path:a,render:function(e){return!0===u?c.a.createElement(t,e):null}},l))},R=a(33),P=function(e){return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"SKU"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Category"),c.a.createElement("th",null,"Date Added"),c.a.createElement("th",null,"Enabled"),c.a.createElement("th",null,"Count"),c.a.createElement("th",null,"Last Restock Date"),c.a.createElement("th",null))),c.a.createElement("tbody",null,e.products.length>0?e.products.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.sku),c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.category),c.a.createElement("td",null,t.date),c.a.createElement("td",null,t.enabled?c.a.createElement(R.a,{icon:"check"}):c.a.createElement(R.a,{icon:"times"})),c.a.createElement("td",null,t.count),c.a.createElement("td",null,t.restock),c.a.createElement("td",null,c.a.createElement(o.b,{to:"/products/"+t.id},c.a.createElement("button",null,"Details")),c.a.createElement("button",{onClick:function(){return e.editRow(t)},className:"button muted-button"},"Edit"),c.a.createElement("button",{onClick:function(){return e.deleteProduct(t.id)},className:"button muted-button"},"Delete")))})):c.a.createElement("tr",null,c.a.createElement("td",{colSpan:8},"No products"))))},A=a(85),D=a.n(A),L=function(e){var t=[{name:"Lily",sku:"lil"},{name:"Raphie",sku:"rph"},{name:"Tiny",sku:"tny"}],a=new Date,l={id:null,sku:"",name:"",category:"",date:a.toLocaleDateString(),enabled:!0,count:"",restock:""},r=Object(n.useState)(l),o=Object(E.a)(r,2),u=o[0],i=o[1],m=Object(n.useState)(a),s=Object(E.a)(m,2),d=s[0],p=s[1],f=function(e){var t=e.target,a=t.name,n=t.value;i(Object(N.a)({},u,Object(w.a)({},a,n)))};return c.a.createElement("form",{autoComplete:"off",onSubmit:function(a){var n;(a.preventDefault(),u.name&&u.category&&u.count)&&(u.sku=(n=u.category,t.find((function(e){return e.name===n})).sku).concat("-#"),u.restock=u.date,e.addProduct(u),i(l),e.hide())}},c.a.createElement("div",{className:"flex-row"},c.a.createElement("div",{className:"flex-large"},c.a.createElement("label",null,"Name"),c.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:f}),c.a.createElement("label",null,"Date Added"),c.a.createElement(D.a,{name:"date",selected:d,onChange:function(e){p(e),i(Object(N.a)({},u,{date:e.toLocaleDateString()}))}})),c.a.createElement("div",{className:"flex-large"},c.a.createElement("label",null,"Category"),c.a.createElement("select",{name:"category",value:u.category,onChange:f},c.a.createElement("option",{value:""},"Select a category"),t.map((function(e){return c.a.createElement("option",{key:e.sku,value:e.name},e.name)}))),c.a.createElement("label",null,"Initial Count"),c.a.createElement("input",{type:"number",name:"count",value:u.count,onChange:f}))),c.a.createElement("button",null,"Save"))},T=function(e){var t=h().logout;return c.a.createElement("div",{className:"header"},c.a.createElement(o.b,{to:e.back},c.a.createElement(R.a,{icon:"arrow-left",size:"2x"})),c.a.createElement("button",{onClick:function(){return t()}},"Log out"),c.a.createElement("h1",null,e.title))},I=function(e){var t=e.isShowing,a=e.hide,n=e.title,l=e.content;return t?r.a.createPortal(c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-overlay"}),c.a.createElement("div",{className:"modal-wrapper","aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h2",null,n),c.a.createElement(R.a,{icon:"times","data-dismiss":"modal",onClick:a})),c.a.createElement("div",null,l)))),document.body):null},W=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],c=t[1];return{isShowing:a,toggle:function(){c(!a)}}},z=function(e){var t=Object(n.useState)(e.currentProduct),a=Object(E.a)(t,2),l=a[0],r=a[1],o=function(e){var t=e.target,a=t.name,n=t.value;r(Object(N.a)({},l,Object(w.a)({},a,n)))};return Object(n.useEffect)((function(){r(e.currentProduct)}),[e]),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(l),e.updateProduct(l.id,l)}},c.a.createElement("div",{className:"flex-row"},c.a.createElement("div",{className:"flex-large"},c.a.createElement("label",null,"Name"),c.a.createElement("input",{type:"text",name:"name",value:l.name,onChange:o})),c.a.createElement("div",{className:"flex-large"},c.a.createElement("label",null,"Category"),c.a.createElement("select",{name:"category",value:l.category,onChange:o},c.a.createElement("option",{value:""},"Select a category"),[{name:"Lily",sku:"lil"},{name:"Raphie",sku:"rph"},{name:"Tiny",sku:"tny"}].map((function(e){return c.a.createElement("option",{key:e.sku,value:e.name},e.name)}))))),c.a.createElement("button",null,"Update product"),c.a.createElement("button",{onClick:function(){return e.cancelUpdate()},className:"button muted-button"},"Cancel"))},q=a(71),_=a(75),H=a(42),J=a.n(H);function X(){var e=Object(_.a)(["\n  query getCategories {\n    categories {\n      name\n      id\n    }\n  }\n"]);return X=function(){return e},e}function B(){var e=Object(_.a)(["\n  query getProducts {\n    products {\n      sku\n      name\n      category_id\n      date_created\n      enabled\n      count\n      last_restock\n    }\n  }\n"]);return B=function(){return e},e}J()(B());var K=J()(X()),M=function(){var e=h().user;console.log(function(e){var t=Object(q.a)(K),a=t.data,n=t.loading,l=t.error;return n?"Loading":l?"Error: ".concat(l.message):a?(console.log(a),a.categories.map((function(e){return c.a.createElement("div",null,e.name)}))):"None found"}(e.sub));var t=Object(n.useState)([{id:1,sku:"sku-2",name:"product",category:"cat",date:"january",enabled:!0,count:29,restock:"01/09/2020"},{id:2,sku:"sku-5",name:"product2",category:"keychain",date:"february",enabled:!1,count:10,restock:"11/26/2019"},{id:3,sku:"sku-1",name:"product3",category:"poster",date:"march",enabled:!0,count:43,restock:"01/09/2020"},{id:4,sku:"sku-4",name:"product4",category:"pin",date:"april",enabled:!0,count:17,restock:"12/15/2019"},{id:5,sku:"sku-6",name:"product5",category:"cat",date:"may",enabled:!1,count:3,restock:"10/31/2019"}]),a=Object(E.a)(t,2),l=a[0],r=a[1],o=W(),u=o.isShowing,i=o.toggle,m=Object(n.useState)(!1),s=Object(E.a)(m,2),d=s[0],p=s[1],f=Object(n.useState)({id:null,name:"",category:""}),b=Object(E.a)(f,2),v=b[0],g=b[1],k=c.a.createElement(L,{addProduct:function(e){e.id=l.length+1,r([].concat(Object(j.a)(l),[e]))},hide:i}),y=c.a.createElement(z,{editing:d,cancelUpdate:function(){p(!1),i()},currentProduct:v,updateProduct:function(e,t){p(!1),i(),r(l.map((function(a){return a.id===e?t:a})))}});return c.a.createElement("div",{className:"full-container"},c.a.createElement(T,{title:"Products",back:"/"}),c.a.createElement(I,{isShowing:u,hide:i,title:d?"Editing "+v.name:"Add a new product",content:d?y:k}),c.a.createElement("div",{className:"container"},c.a.createElement("button",{onClick:i},"Add new product"),c.a.createElement("div",{className:"flex-large"},c.a.createElement(P,{products:l,editRow:function(e){p(!0),i(),g({id:e.id,name:e.name,category:e.category})},deleteProduct:function(e){r(l.filter((function(t){return t.id!==e})))}}))))},Q=function(e){var t=Object(n.useState)({product:{},loading:!0}),a=Object(E.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){!function(){var t;d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t={id:e.match.params.id},r(t);case 2:case"end":return a.stop()}}))}()}),[]),l.loading?c.a.createElement("div",null,"Loading..."):c.a.createElement("div",{className:"full-container"},c.a.createElement(T,{title:l.id,back:"/products"}),c.a.createElement("div",{className:"container"},c.a.createElement("h2",null,"Some data about ",l.id)))},F=function(e){return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Location"),c.a.createElement("th",null,"Date"),c.a.createElement("th",null))),c.a.createElement("tbody",null,e.events.length>0?e.events.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.location),c.a.createElement("td",null,t.date),c.a.createElement("td",null,c.a.createElement(o.b,{to:"/events/"+t.id},c.a.createElement("button",null,"Sales")),c.a.createElement("button",{onClick:function(){return e.editRow(t)},className:"button muted-button"},"Edit"),c.a.createElement("button",{onClick:function(){return e.deleteEvent(t.id)},className:"button muted-button"},"Delete")))})):c.a.createElement("tr",null,c.a.createElement("td",{colSpan:4},"No events"))))},G=function(){var e=Object(n.useState)([{id:1,name:"a convention",location:"los angeles",date:"april"},{id:2,name:"another convention",location:"sacramento",date:"february"},{id:3,name:"convention",location:"fresno",date:"asdf"},{id:4,name:"aon",location:"new york city",date:"date"},{id:5,name:"convosid",location:"seattle",date:"02/31/2020"},{id:6,name:"dallasconvention",location:"dallas",date:"9"},{id:7,name:"RTX",location:"austin",date:"twelve twelve twentytwenty"},{id:8,name:"zotzotzot",location:"irvine",date:"pog"},{id:9,name:"AX",location:"los angeles",date:"sad"}]),t=Object(E.a)(e,2),a=t[0],l=t[1];return c.a.createElement("div",{className:"full-container"},c.a.createElement(T,{title:"Events",back:"/"}),c.a.createElement("div",{className:"container"},c.a.createElement("button",null,"Add new event"),c.a.createElement("div",{className:"flex-large"},c.a.createElement(F,{events:a,deleteEvent:function(e){l(a.filter((function(t){return t.id!==e})))}}))))},V=function(e){var t=e.match.params.id;console.log("fetching "+t);var a=[{id:1,day:2,items:["sku-1","sku-3"],total:20,cc:!0,female:!1}],l=Object(n.useState)({eventSales:{},loading:!0}),r=Object(E.a)(l,2),o=(r[0],r[1]);Object(n.useEffect)((function(){d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:o(a);case 2:case"end":return e.stop()}}))}),[]);return c.a.createElement("div",{className:"full-container"},c.a.createElement(T,{title:"Sales for event "+t,back:"/events"}),c.a.createElement("div",{className:"container"},c.a.createElement("button",null,"Add new sale"),c.a.createElement("div",{className:"flex-large"})))},Y=function(){var e=h(),t=e.isAuthenticated;return e.loading?c.a.createElement("div",null,"Loading..."):c.a.createElement(m.c,null,!t&&c.a.createElement(m.a,{exact:!0,path:"/",component:y}),t&&c.a.createElement(m.a,{exact:!0,path:"/",component:k}),c.a.createElement(U,{path:"/users",component:C}),c.a.createElement(U,{exact:!0,path:"/products",component:M}),c.a.createElement(U,{path:"/products/:id",component:Q}),c.a.createElement(U,{exact:!0,path:"/events",component:G}),c.a.createElement(U,{path:"/events/:id",component:V}))},Z=a(92),$=a(16),ee=a(39);console.log(ee);var te=a(18),ae=Object(te.a)();u.b.add(i.b,i.d,i.c,i.a),r.a.render(c.a.createElement(o.a,{basename:"/nekoma-frontend"},c.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,l=void 0===a?v:a,r=Object(p.a)(e,["children","onRedirectCallback"]),o=Object(n.useState)(),u=Object(E.a)(o,2),i=u[0],m=u[1],s=Object(n.useState)(),f=Object(E.a)(s,2),h=f[0],k=f[1],y=Object(n.useState)(),j=Object(E.a)(y,2),O=j[0],w=j[1],N=Object(n.useState)(!0),x=Object(E.a)(N,2),S=x[0],C=x[1],U=Object(n.useState)(!1),R=Object(E.a)(U,2),P=R[0],A=R[1];Object(n.useEffect)((function(){!function(){var e,t,a,n,c;d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.awrap(b()(r));case 2:if(e=o.sent,w(e),!window.location.search.includes("code=")){o.next=10;break}return o.next=7,d.a.awrap(e.handleRedirectCallback());case 7:t=o.sent,a=t.appState,l(a);case 10:return o.next=12,d.a.awrap(e.isAuthenticated());case 12:if(n=o.sent,m(n),!n){o.next=19;break}return o.next=17,d.a.awrap(e.getUser());case 17:c=o.sent,k(c);case 19:C(!1);case 20:case"end":return o.stop()}}))}()}),[]);return c.a.createElement(g.Provider,{value:{isAuthenticated:i,user:h,loading:S,popupOpen:P,loginWithPopup:function(){var e,t,a=arguments;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},A(!0),n.prev=2,n.next=5,d.a.awrap(O.loginWithPopup(e));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.error(n.t0);case 10:return n.prev=10,A(!1),n.finish(10);case 13:return n.next=15,d.a.awrap(O.getUser());case 15:t=n.sent,k(t),m(!0);case 18:case"end":return n.stop()}}),null,null,[[2,7,10,13]])},handleRedirectCallback:function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.next=3,d.a.awrap(O.handleRedirectCallback());case 3:return t.next=5,d.a.awrap(O.getUser());case 5:e=t.sent,C(!1),m(!0),k(e);case 9:case"end":return t.stop()}}))},getIdTokenClaims:function(){return O.getIdTokenClaims.apply(O,arguments)},loginWithRedirect:function(){return O.loginWithRedirect.apply(O,arguments)},getTokenSilently:function(){return O.getTokenSilently.apply(O,arguments)},getTokenWithPopup:function(){return O.getTokenWithPopup.apply(O,arguments)},logout:function(){return O.logout.apply(O,arguments)}}},t)}),{domain:ee.domain,client_id:ee.clientId,audience:"https://nekoma.auth0.com/api/v2/",redirect_uri:window.location.origin+window.location.pathname,onRedirectCallback:function(e){ae.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},c.a.createElement((function(e){var t=e.children,a=h(),n=a.loading,l=a.isAuthenticated,r=a.getTokenSilently;if(n)return c.a.createElement("div",null,"Loading...");var o=new Z.a({uri:ee.graphQlEndpoint,request:function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!l){a.next=6;break}return a.next=3,d.a.awrap(r());case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=null;case 7:t=a.t0,e.setContext({headers:{authorization:t?"Bearer ".concat(t):void 0}}),console.log(t);case 10:case"end":return a.stop()}}))}});return c.a.createElement($.a,{client:o},t)}),null,c.a.createElement(Y,null)))),document.getElementById("root"))},39:function(e){e.exports=JSON.parse('{"domain":"nekoma.auth0.com","clientId":"KMLm5X41YHwmHjsgym52hw0aGHr64buE","audience":"https://nekoma.herokuapp.com/v1/graphql","graphQlEndpoint":"https://nekoma.herokuapp.com/v1/graphql"}')},93:function(e,t,a){e.exports=a(165)},99:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.03039a05.chunk.js.map